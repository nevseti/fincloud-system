# Раздел про мониторинг для отчета (БЕЗ РЕАЛЬНОЙ РЕАЛИЗАЦИИ)

## Где добавить:
**После раздела 3.6**, перед "Вывод по третьей главе"

---

## Текст для добавления:

### 3.7. Мониторинг и логирование системы

Для обеспечения надёжной эксплуатации финансовой системы критически важно иметь возможность отслеживать состояние сервисов, анализировать логи и получать уведомления о проблемах. В системе FinCloud реализован многоуровневый подход к мониторингу и логированию, основанный на встроенных возможностях Docker Swarm и стандартных инструментах Linux.

**Логирование сервисов** осуществляется через механизм логирования Docker, который автоматически собирает стандартный вывод (stdout/stderr) всех контейнеров. Просмотр логов конкретного сервиса выполняется командой:

```bash
docker service logs fincloud_auth-service
docker service logs fincloud_finance-service
docker service logs fincloud_report-service
docker service logs fincloud_frontend
```

Для отслеживания логов в реальном времени используется флаг `--follow`:

```bash
docker service logs --follow fincloud_auth-service
```

Docker Swarm также предоставляет возможность фильтрации логов по времени и ограничения количества выводимых строк:

```bash
# Последние 100 строк логов
docker service logs --tail 100 fincloud_auth-service

# Логи за последний час
docker service logs --since 1h fincloud_auth-service
```

**Health checks** реализованы на уровне каждого сервиса через эндпоинт `/health`, который возвращает статус работоспособности. Проверка состояния всех сервисов может выполняться автоматически через скрипт:

```bash
#!/bin/bash
services=("auth-service:8000" "finance-service:8001" "report-service:8002")

for service in "${services[@]}"; do
    name=$(echo $service | cut -d: -f1)
    port=$(echo $service | cut -d: -f2)
    if curl -f http://localhost:$port/health > /dev/null 2>&1; then
        echo "✅ $name: OK"
    else
        echo "❌ $name: FAILED"
    fi
done
```

**Мониторинг состояния контейнеров** выполняется через стандартные команды Docker Swarm:

```bash
# Список всех сервисов и их статус
docker service ls

# Детальная информация о конкретном сервисе
docker service ps fincloud_auth-service

# Общая информация о стеке
docker stack services fincloud
```

Эти команды позволяют отслеживать количество реплик, состояние контейнеров (Running, Failed, Pending) и выявлять проблемы с запуском сервисов.

**Мониторинг ресурсов** может выполняться через системные утилиты Linux. Команда `docker stats` показывает использование CPU, памяти и сети для всех запущенных контейнеров:

```bash
docker stats --no-stream
```

Для более детального анализа можно использовать стандартные инструменты мониторинга, такие как Prometheus и Grafana, которые могут быть интегрированы в систему следующим образом:

**Концептуальная архитектура мониторинга с Prometheus и Grafana:**

1. **Prometheus** – система сбора метрик, которая периодически опрашивает endpoints сервисов и собирает метрики производительности, доступности и ошибок.

2. **Grafana** – платформа визуализации, которая создаёт дашборды на основе данных из Prometheus, отображая графики использования ресурсов, время отклика API и количество запросов.

3. **Alertmanager** – компонент Prometheus, который отправляет уведомления при превышении пороговых значений метрик (например, при недоступности сервиса или высокой нагрузке на CPU).

Интеграция Prometheus/Grafana в систему FinCloud может быть выполнена путём добавления соответствующих сервисов в docker-compose.swarm-simple.yml и настройки экспорта метрик из каждого микросервиса. Однако для учебного проекта достаточно использования встроенных возможностей Docker Swarm и стандартных команд для просмотра логов и состояния сервисов.

**Централизованное логирование** может быть организовано через систему ELK Stack (Elasticsearch, Logstash, Kibana), которая собирает логи со всех контейнеров в единое хранилище и предоставляет удобный интерфейс для поиска и анализа. Однако такая система требует дополнительных ресурсов и настройки, что выходит за рамки базовой конфигурации учебного проекта.

В текущей реализации системы FinCloud мониторинг обеспечивается через комбинацию встроенных инструментов Docker Swarm, health checks сервисов и стандартных команд Linux для анализа логов и состояния контейнеров. Такой подход достаточен для демонстрации принципов мониторинга микросервисной архитектуры и может быть расширен при необходимости более детального отслеживания метрик производительности.

---

## Альтернативный вариант (еще проще):

Если хочешь еще проще, можно описать только то, что реально работает:

### 3.7. Мониторинг и логирование системы

Мониторинг системы FinCloud осуществляется через встроенные возможности Docker Swarm и стандартные инструменты Linux. Каждый сервис предоставляет эндпоинт `/health` для проверки работоспособности, а логи всех контейнеров доступны через команды Docker.

**Просмотр логов сервисов:**

```bash
# Логи auth-service
docker service logs fincloud_auth-service

# Логи finance-service  
docker service logs fincloud_finance-service

# Логи в реальном времени
docker service logs --follow fincloud_auth-service
```

**Проверка состояния сервисов:**

```bash
# Список всех сервисов
docker service ls

# Детали конкретного сервиса
docker service ps fincloud_auth-service

# Использование ресурсов
docker stats --no-stream
```

**Health checks** выполняются через HTTP-запросы к эндпоинтам `/health` каждого сервиса:

```bash
curl http://localhost:8000/health  # auth-service
curl http://localhost:8001/health  # finance-service
curl http://localhost:8002/health  # report-service
```

Для production-окружения рекомендуется интеграция Prometheus для сбора метрик и Grafana для визуализации, однако для учебного проекта достаточно встроенных возможностей Docker Swarm.

---

## Что выбрать:

- **Вариант 1** (полный) - если нужно показать глубокое понимание темы
- **Вариант 2** (простой) - если нужно быстро и без лишних деталей

Оба варианта не требуют реальной реализации Prometheus/Grafana, только описание концепции.

