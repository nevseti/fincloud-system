<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–∞—à–±–æ—Ä–¥ - –û–û–û –¢–æ—Ä–≥–∞—à–∏</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="topbar">
                <div class="brand"><span class="logo">üè¢</span> –û–û–û –¢–æ—Ä–≥–∞—à–∏</div>
                <div class="actions">
                    <span id="userInfo">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                    <button id="logoutBtn" class="btn-secondary">–í—ã–π—Ç–∏</button>
                </div>
            </div>
            <div class="dashboard-header">
                <div>
                    <h1>–î–∞—à–±–æ—Ä–¥ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã</h1>
                    <p id="pageTitle" style="opacity:.8">–°–≤–æ–¥–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –∏ –æ–ø–µ—Ä–∞—Ü–∏–∏</p>
                </div>
            </div>
        </header>

        <main>
            <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ —Å –±–∞–ª–∞–Ω—Å–æ–º -->
            <div class="balance-cards">
                <div class="balance-card">
                    <h3>–û–±—â–∏–π –±–∞–ª–∞–Ω—Å</h3>
                    <div class="amount" id="currentBalance">‚ÇΩ0</div>
                </div>
                <div class="balance-card" style="background: linear-gradient(135deg, #28a745, #20c997);">
                    <h3>–î–æ—Ö–æ–¥—ã</h3>
                    <div class="amount" id="totalIncome">‚ÇΩ0</div>
                </div>
                <div class="balance-card" style="background: linear-gradient(135deg, #dc3545, #e83e8c);">
                    <h3>–†–∞—Å—Ö–æ–¥—ã</h3>
                    <div class="amount" id="totalExpense">‚ÇΩ0</div>
                </div>
            </div>

            <!-- –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏ -->
            <div class="dashboard-card">
                <h2>‚ûï –ù–æ–≤–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è</h2>
                <form id="operationForm">
                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                        <div class="form-group">
                            <label for="type">–¢–∏–ø –æ–ø–µ—Ä–∞—Ü–∏–∏:</label>
                            <select id="type" name="type" required>
                                <option value="income">–î–æ—Ö–æ–¥</option>
                                <option value="expense">–†–∞—Å—Ö–æ–¥</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="amount">–°—É–º–º–∞ (‚ÇΩ):</label>
                            <input type="number" id="amount" name="amount" step="0.01" min="0" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="branch_id">–§–∏–ª–∏–∞–ª:</label>
                            <select id="branch_id" name="branch_id" required>
                                <option value="1">–§–∏–ª–∏–∞–ª 1</option>
                                <option value="2">–§–∏–ª–∏–∞–ª 2</option>
                                <option value="3">–§–∏–ª–∏–∞–ª 3</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="description">–û–ø–∏—Å–∞–Ω–∏–µ:</label>
                            <input type="text" id="description" name="description" required>
                        </div>
                    </div>
                    
                    <button type="submit" class="btn-primary">–°–æ–∑–¥–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é</button>
                </form>
            </div>

            <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ —Ñ–∏–ª—å—Ç—Ä—ã -->
            <div class="operations-controls">
                <div class="form-group" style="margin: 0;">
                    <label for="branchFilter">–§–∏–ª—å—Ç—Ä –ø–æ —Ñ–∏–ª–∏–∞–ª—É:</label>
                    <select id="branchFilter">
                        <option value="">–í—Å–µ —Ñ–∏–ª–∏–∞–ª—ã</option>
                        <option value="1">–§–∏–ª–∏–∞–ª 1</option>
                        <option value="2">–§–∏–ª–∏–∞–ª 2</option>
                        <option value="3">–§–∏–ª–∏–∞–ª 3</option>
                    </select>
                </div>
                <div class="form-group" style="margin: 0;">
                    <label for="searchOps">–ü–æ–∏—Å–∫ (–æ–ø–∏—Å–∞–Ω–∏–µ):</label>
                    <input type="text" id="searchOps" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç" />
                </div>
                <div class="form-group" style="margin: 0;">
                    <label for="sortOps">–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:</label>
                    <select id="sortOps">
                        <option value="date_desc">–î–∞—Ç–∞ ‚Üì</option>
                        <option value="date_asc">–î–∞—Ç–∞ ‚Üë</option>
                        <option value="amount_desc">–°—É–º–º–∞ ‚Üì</option>
                        <option value="amount_asc">–°—É–º–º–∞ ‚Üë</option>
                        <option value="type_asc">–¢–∏–ø A‚Üí–Ø</option>
                        <option value="type_desc">–¢–∏–ø –Ø‚ÜíA</option>
                    </select>
                </div>
                
                <button id="refreshBtn" class="btn-secondary">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
            </div>

            <!-- –°–ø–∏—Å–æ–∫ –æ–ø–µ—Ä–∞—Ü–∏–π -->
            <div class="dashboard-card">
                <h2>üìã –ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π</h2>
                <div class="operations-section">
                    <table>
                        <thead>
                            <tr>
                                <th>–î–∞—Ç–∞</th>
                                <th>–¢–∏–ø</th>
                                <th>–°—É–º–º–∞</th>
                                <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
                                <th>–§–∏–ª–∏–∞–ª</th>
                            </tr>
                        </thead>
                        <tbody id="operationsTable">
                            <tr>
                                <td colspan="5" style="text-align: center;">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</td>
                            </tr>
                        </tbody>
                    </table>
                    <div id="operationsPagination" style="display:flex; justify-content: center; align-items:center; gap: 10px; margin-top: 10px;">
                        <button id="prevPageBtn" class="btn-secondary">‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∞—è</button>
                        <span>–°—Ç—Ä–∞–Ω–∏—Ü–∞ <span id="currentPage">1</span> –∏–∑ <span id="totalPages">1</span></span>
                        <button id="nextPageBtn" class="btn-secondary">–°–ª–µ–¥—É—é—â–∞—è ‚Üí</button>
                    </div>
                </div>
            </div>

            <!-- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (–¥–ª—è –∞–¥–º–∏–Ω–∞) -->
            <div class="dashboard-card" id="adminPanel" style="display: none; margin-top: 20px;">
                <h2>üëë –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</h2>
                <div class="operations-section">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div>
                            <h3 style="margin-top: 0;">–í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h3>
                            <table>
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Email</th>
                                        <th>–†–æ–ª—å</th>
                                        <th>–§–∏–ª–∏–∞–ª</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody id="usersTable">
                                    <tr>
                                        <td colspan="5" style="text-align: center;">–ó–∞–≥—Ä—É–∑–∫–∞...</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div>
                            <h3 style="margin-top: 0;">–°–æ–∑–¥–∞—Ç—å/–∏–∑–º–µ–Ω–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h3>
                            <form id="userForm">
                                <input type="hidden" id="userId" />
                                <div class="form-group">
                                    <label for="userEmail">Email:</label>
                                    <input type="email" id="userEmail" required />
                                </div>
                                <div class="form-group">
                                    <label for="userPassword">–ü–∞—Ä–æ–ª—å:</label>
                                    <input type="text" id="userPassword" placeholder="–û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º, –µ—Å–ª–∏ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π" />
                                </div>
                                <div class="form-group">
                                    <label for="userRole">–†–æ–ª—å:</label>
                                    <select id="userRole" required>
                                        <option value="system_admin">system_admin</option>
                                        <option value="manager">manager</option>
                                        <option value="accountant">accountant</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="userBranch">–§–∏–ª–∏–∞–ª (0 = –≤—Å–µ):</label>
                                    <input type="number" id="userBranch" min="0" value="0" required />
                                </div>
                                <div style="display:flex; gap: 10px;">
                                    <button type="submit" class="btn-primary" id="saveUserBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                                    <button type="button" class="btn-secondary" id="resetUserFormBtn">–°–±—Ä–æ—Å</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </main>

    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º JavaScript -->
    <script src="auth.js"></script>
    <!-- <script src="finance.js"></script> -->
    <script src="app.js"></script>

    <!-- –ü—Ä–æ—Å—Ç–æ–π —Ä–∞–∑–¥–µ–ª –æ—Ç—á–µ—Ç–æ–≤ -->
    <div class="dashboard-card" style="margin-top: 20px;">
        <h2>üìÑ –û—Ç—á–µ—Ç—ã (–ª–µ–≥–∫–∏–π —Å–µ—Ä–≤–∏—Å)</h2>
        <div class="operations-section">
            <div style="display:flex; gap: 10px; align-items: end; flex-wrap: wrap;">
                <div class="form-group" style="margin:0;">
                    <label for="reportBranch">–§–∏–ª–∏–∞–ª (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                    <select id="reportBranch">
                        <option value="">–í—Å–µ</option>
                        <option value="1">–§–∏–ª–∏–∞–ª 1</option>
                        <option value="2">–§–∏–ª–∏–∞–ª 2</option>
                        <option value="3">–§–∏–ª–∏–∞–ª 3</option>
                    </select>
                </div>
                <div class="form-group" style="margin:0;">
                    <label for="reportLimit">–ö–æ–ª-–≤–æ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π</label>
                    <select id="reportLimit">
                        <option value="5">5</option>
                        <option value="10" selected>10</option>
                        <option value="20">20</option>
                        <option value="50">50</option>
                    </select>
                </div>
                <button id="btnSummary" class="btn-primary">–ü–æ–∫–∞–∑–∞—Ç—å —Å–≤–æ–¥–∫—É</button>
                <button id="btnExportCsv" class="btn-secondary">–≠–∫—Å–ø–æ—Ä—Ç CSV</button>
                <button id="btnExportPdf" class="btn-secondary">–≠–∫—Å–ø–æ—Ä—Ç PDF</button>
            </div>
            <pre id="summaryOutput" style="background:#0b1020; color:#cde3ff; padding:10px; border-radius:8px; margin-top: 10px; white-space: pre-wrap;"></pre>
        </div>
    </div>

    <footer>
        <p>–û–±–ª–∞—á–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–∏–Ω–∞–Ω—Å–∞–º–∏ | –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞</p>
    </footer>
</body>
</html>